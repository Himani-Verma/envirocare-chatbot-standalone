<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Envirocare Labs Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2d4891',
                        'primary-dark': '#1e3a8a'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito:wght@400;500;600;700&display=swap');
        
        /* Envirocare Chat Theme Variables */
        .envirocare-chat {
            --ec-blue: #2d4891;
            --ec-blue-700: #233a7a;
            --ec-green: #64aa53;
            --ec-bg: #f6f7fb;
            --ec-ink: #17223b;
            --ec-muted: #6b7385;
            --radius: 14px;
            --shadow: 0 8px 28px rgba(18, 28, 45, 0.12);
            --shadow-soft: 0 4px 14px rgba(18, 28, 45, 0.08);
            --blur: saturate(180%) blur(10px);
            
            font-family: 'Inter', 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--ec-bg);
            color: var(--ec-ink);
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        .envirocare-chat * {
            box-sizing: border-box;
        }
        
        /* Background Pattern */
        .envirocare-chat::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: url('./images/bg-wave.svg') no-repeat center top;
            background-size: cover;
            opacity: 0.08;
            pointer-events: none;
            z-index: -1;
        }
        
        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .slide-in { animation: slideIn 0.3s ease-out; }
        .slide-out { animation: slideOut 0.3s ease-in; }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        .pulse-animation { animation: pulse 2s infinite; }
        
        /* Enhanced scrollbar */
        .envirocare-chat .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .envirocare-chat .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .envirocare-chat .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--ec-blue);
            border-radius: 3px;
        }
        
        .envirocare-chat .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: var(--ec-blue-700);
        }
        
        /* Header Styling */
        .envirocare-chat .chat-header {
            height: 50px;
            background: linear-gradient(135deg, var(--ec-blue), var(--ec-blue-700));
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-soft);
            flex-shrink: 0;
        }
        
        .envirocare-chat .chat-header .logo {
            height: 35px;
            width: auto;
            object-fit: contain;
            max-width: 150px;
        }
        
        .envirocare-chat .chat-header .title {
            font-size: 16px;
            font-weight: 600;
            color: white;
        }
        
        /* Chat message bubbles */
        .envirocare-chat .message-bubble {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            box-shadow: var(--shadow-soft);
            margin-bottom: 4px;
            word-wrap: break-word;
            position: relative;
            animation: messageSlideIn 0.3s ease-out;
            transition: all 0.2s ease;
        }
        
        .envirocare-chat .message-bubble:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }
        
        .envirocare-chat .message-bubble.user {
            background: linear-gradient(135deg, #f1f3f7, #e8ecf7);
            margin-left: auto;
            color: var(--ec-ink);
            border: 1px solid rgba(45, 72, 145, 0.1);
        }
        
        .envirocare-chat .message-bubble.bot {
            background: linear-gradient(135deg, #e9efff, #f0f4ff);
            margin-right: auto;
            color: #102a56;
            border: 1px solid rgba(45, 72, 145, 0.15);
        }
        
        .envirocare-chat .message-bubble.bot .avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 8px;
            border: 2px solid var(--ec-blue);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* FAQ card hover effects */
        .envirocare-chat .faq-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border-radius: var(--radius);
            box-shadow: var(--shadow-soft);
        }
        
        .envirocare-chat .faq-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        /* Button enhancements */
        .envirocare-chat .btn-primary {
            background: var(--ec-blue);
            color: white;
            border-radius: var(--radius);
            transition: all 0.2s ease-in-out;
            border: none;
            font-weight: 500;
            height: 52px;
            position: relative;
            overflow: hidden;
        }
        
        .envirocare-chat .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .envirocare-chat .btn-primary:hover::before {
            left: 100%;
        }
        
        .envirocare-chat .btn-primary:hover {
            background: var(--ec-blue-700);
            transform: translateY(-1px) scale(1.01);
            box-shadow: var(--shadow);
        }
        
        .envirocare-chat .btn-secondary {
            background: transparent;
            color: var(--ec-blue);
            border: 2px solid var(--ec-blue);
            border-radius: var(--radius);
            transition: all 0.2s ease-in-out;
            position: relative;
            overflow: hidden;
        }
        
        .envirocare-chat .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: var(--ec-blue);
            transition: width 0.3s ease;
            z-index: -1;
        }
        
        .envirocare-chat .btn-secondary:hover::before {
            width: 100%;
        }
        
        .envirocare-chat .btn-secondary:hover {
            color: white;
            transform: translateY(-1px);
        }
        
        /* Trust chips */
        .envirocare-chat .trust-chip {
            background: rgba(100, 170, 83, 0.1);
            color: var(--ec-green);
            border: 1px solid rgba(100, 170, 83, 0.2);
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .envirocare-chat .trust-chip:hover {
            background: rgba(100, 170, 83, 0.2);
            transform: translateY(-1px);
        }
        
        /* Quick reply chips */
        .envirocare-chat .quick-reply-chip {
            background: white;
            color: var(--ec-blue);
            border: 2px solid var(--ec-blue);
            border-radius: 22px;
            padding: 7px 14px;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .envirocare-chat .quick-reply-chip::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--ec-blue);
            transition: left 0.3s ease;
            z-index: -1;
        }
        
        .envirocare-chat .quick-reply-chip:hover::before {
            left: 0;
        }
        
        .envirocare-chat .quick-reply-chip:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }
        
        /* Typing indicator */
        .envirocare-chat .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .envirocare-chat .typing-indicator .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--ec-muted);
            animation: typing 1.4s infinite;
        }
        
        .envirocare-chat .typing-indicator .dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .envirocare-chat .typing-indicator .dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        /* Focus styles for accessibility */
        .envirocare-chat .focus-visible:focus {
            outline: 2px solid #90a7ff;
            outline-offset: 2px;
        }
        
        /* Typography */
        .envirocare-chat .heading {
            font-size: 22px;
            font-weight: 700;
            line-height: 1.3;
            letter-spacing: -0.02em;
        }
        
        .envirocare-chat .subheading {
            font-size: 14px;
            font-weight: 600;
            line-height: 1.4;
            letter-spacing: 0.01em;
        }
        
        .envirocare-chat .body-text {
            font-size: 14px;
            font-weight: 400;
            line-height: 1.5;
            letter-spacing: 0.01em;
        }
        
        .envirocare-chat .small-text {
            font-size: 11px;
            font-weight: 400;
            line-height: 1.4;
            letter-spacing: 0.01em;
            color: var(--ec-muted);
        }
        
        /* Empty states */
        .envirocare-chat .empty-state {
            text-align: center;
            padding: 32px 16px;
            color: var(--ec-muted);
        }
        
        .envirocare-chat .empty-state .emoji {
            font-size: 32px;
            margin-bottom: 12px;
        }
        
        /* Mobile and responsive optimizations */
        @media (max-width: 768px) {
            .envirocare-chat {
                --radius: 12px;
            }
            
            .envirocare-chat .chat-header {
                height: 55px;
                padding: 0 1rem;
            }
            
            .envirocare-chat .chat-header .logo {
                height: 30px;
                max-width: 120px;
            }
            
            .envirocare-chat .heading {
                font-size: 18px;
            }
            
            .envirocare-chat .subheading {
                font-size: 13px;
            }
            
            .envirocare-chat .body-text {
                font-size: 13px;
            }
        }
        
        @media (max-width: 480px) {
            .envirocare-chat .chat-header {
                height: 50px;
                padding: 0 0.75rem;
            }
            
            .envirocare-chat .chat-header .logo {
                height: 28px;
                max-width: 100px;
            }
            
            .envirocare-chat .heading {
                font-size: 16px;
            }
            
            .envirocare-chat .subheading {
                font-size: 12px;
            }
            
            .envirocare-chat .body-text {
                font-size: 12px;
            }
        }
        
        /* Ensure no horizontal scroll */
        .envirocare-chat {
            box-sizing: border-box;
            overflow-x: hidden;
        }
        
        .envirocare-chat * {
            box-sizing: border-box;
        }
        
        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .envirocare-chat * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Chatbot Container - NO FLOATING WIDGET -->
    <div id="chatbot-container" class="envirocare-chat w-full h-full max-w-full bg-white overflow-hidden flex flex-col backdrop-blur-sm bg-white/95" style="max-width: 100vw; max-height: 100vh;">
        <!-- Header -->
        <div class="chat-header flex items-center justify-between px-3 py-2">
            <div class="flex items-center space-x-2">
                <img src="./images/envirocare-logo.png" alt="Envirocare Labs" class="logo h-8 w-auto">
                <div>
                    <h1 class="title text-sm">Envirocare Labs</h1>
                    <p class="small-text text-white/80 text-xs">Analysis and Beyond...</p>
                </div>
            </div>
            <div class="flex items-center space-x-1">
                <button class="text-white/80 hover:text-white transition-colors duration-200 p-1.5 rounded-lg hover:bg-white/10 focus-visible">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <button onclick="resetChat()" class="text-white/80 hover:text-white transition-colors duration-200 p-1.5 rounded-lg hover:bg-white/10 focus-visible">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Content Area -->
        <div id="content-area" class="flex-1 p-2 bg-gradient-to-b from-gray-50 to-white overflow-y-auto custom-scrollbar" style="scroll-behavior: smooth;">
            <!-- Home Screen -->
            <div id="home-screen" class="text-center space-y-4 py-4">
                <!-- Hero Section with Avatar -->
                <div class="space-y-4">
                    <div class="flex justify-center">
                        <div class="relative">
                            <img src="./images/eva-avatar.png" alt="Eva Assistant" class="w-14 h-14 rounded-full border-4 border-white shadow-lg">
                            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <h2 class="heading text-gray-800">
                            Hey! How can we help you today?
                        </h2>
                        <p class="body-text text-gray-600">I'm Eva, your AI assistant. Let's get started!</p>
                    </div>
                </div>
                
                <!-- CTA Buttons -->
                <div class="space-y-3">
                    <button onclick="startChat()" class="btn-primary w-full py-4 px-6 flex items-center justify-center space-x-2 focus-visible">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                        </svg>
                        <span class="subheading">Chat with Eva now</span>
                    </button>
                    <button onclick="showFAQ()" class="btn-secondary w-full py-3 px-4 focus-visible">
                        <span class="subheading">Browse FAQ</span>
                    </button>
                </div>
                
                <!-- Trust Chips -->
                <div class="flex flex-wrap justify-center gap-2">
                    <span class="trust-chip">NABL accredited</span>
                    <span class="trust-chip">ISO 9001</span>
                    <span class="trust-chip">Pan-India service</span>
                </div>
            </div>

            <!-- Visitor Form -->
            <div id="visitor-form" class="space-y-6 py-8 hidden">
                <div class="text-center">
                    <h3 class="heading text-gray-800 mb-2">Welcome to Envirocare Labs!</h3>
                    <p class="body-text text-gray-600">Please provide your details to start the conversation!</p>
                </div>
                <form id="visitor-form-element" class="space-y-4">
                    <div>
                        <label class="block subheading text-gray-700 mb-2">Name</label>
                        <input id="visitor-name" type="text" placeholder="Enter your name" required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm text-gray-900 body-text focus-visible" />
                    </div>
                    <div>
                        <label class="block subheading text-gray-700 mb-2">Email</label>
                        <input id="visitor-email" type="email" placeholder="Enter your email" required
                            class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm text-gray-900 body-text focus-visible" />
                    </div>
                    <div>
                        <label class="block subheading text-gray-700 mb-2">Phone Number</label>
                        <div class="flex items-stretch">
                            <div class="relative">
                                <button type="button" onclick="toggleCountryDropdown()" 
                                    class="flex items-center justify-center px-3 py-3 border border-r-0 border-gray-200 rounded-l-xl bg-white/80 backdrop-blur-sm text-gray-900 hover:bg-gray-50 transition-all duration-200 w-20 h-12 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent focus-visible">
                                    <span class="body-text font-medium flex items-center">
                                        <span class="mr-1" id="selected-flag">🇮🇳</span>
                                        <span id="selected-code">+91</span>
                                    </span>
                                    <svg class="w-3 h-3 ml-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>
                                
                                <div id="country-dropdown" class="absolute top-full left-0 z-50 w-72 max-h-64 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-xl mt-1 hidden">
                                    <div class="p-1">
                                        <div class="text-xs font-medium text-gray-500 mb-1 px-3 py-2 border-b border-gray-100">Select Country</div>
                                        <div id="country-list"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <input id="visitor-phone" type="tel" placeholder="Enter your phone number" 
                                class="flex-1 px-4 py-3 border border-gray-200 rounded-r-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm text-gray-900 h-12 body-text focus-visible" />
                        </div>
                    </div>
                    <button type="submit" id="start-chat-btn" 
                        class="btn-primary w-full py-3 px-4 disabled:opacity-50 disabled:cursor-not-allowed focus-visible">
                        <span id="btn-text" class="subheading">Start Chat</span>
                    </button>
                </form>
            </div>

            <!-- Chat Area -->
            <div id="chat-area" class="space-y-2 py-2 hidden">
                <div class="flex justify-end">
                    <button onclick="resetChat()" 
                        class="small-text text-primary hover:text-primary-dark hover:underline transition-colors duration-200 px-3 py-2 rounded-lg hover:bg-blue-50 focus-visible">
                        Start New Chat
                    </button>
                </div>
                <div id="messages-container" class="space-y-2 min-h-[300px] overflow-y-auto custom-scrollbar"></div>
                
                <!-- Typing Indicator -->
                <div id="typing-indicator" class="flex justify-start hidden">
                    <div class="message-bubble bot">
                        <div class="typing-indicator">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                    </div>
                </div>
                <div id="loading-indicator" class="flex justify-start hidden">
                    <div class="bg-white text-gray-800 px-4 py-3 rounded-2xl shadow-md border border-gray-100">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce animate-bounce-delay-1"></div>
                            <div class="w-2 h-2 bg-blue-400 rounded-full animate-bounce animate-bounce-delay-2"></div>
                        </div>
                    </div>
                </div>
                <div id="quick-replies" class="flex justify-start mt-1 hidden">
                    <div class="grid grid-cols-2 gap-2 w-full" id="quick-replies-grid"></div>
                </div>
            </div>

            <!-- FAQ Area -->
            <div id="faq-area" class="space-y-6 py-4 hidden">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-8 h-8 bg-gradient-to-r from-primary to-primary-dark rounded-full flex items-center justify-center">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <h3 class="heading text-gray-800">Search FAQ</h3>
                </div>
                
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <svg class="h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <input type="text" id="faq-search" placeholder="Search FAQs..." 
                        class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 bg-white/80 backdrop-blur-sm text-gray-900 body-text focus-visible" />
                </div>

                <div id="faq-results" class="space-y-3">
                    <!-- Empty state will be shown when no results -->
                    <div id="faq-empty-state" class="empty-state">
                        <div class="emoji">🔍</div>
                        <p class="body-text">No questions yet—try typing "pricing" or "NABL"</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div id="chat-input" class="p-2 border-t border-gray-100 bg-white/90 backdrop-blur-sm hidden">
            <div class="flex items-center space-x-2">
                <!-- Emoji button -->
                <button class="p-1.5 text-gray-400 hover:text-gray-600 transition-colors focus-visible">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </button>
                <input type="text" id="message-input" placeholder="Type your message here..." 
                    class="flex-1 px-3 py-2 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 bg-white/90 backdrop-blur-sm text-black body-text focus-visible" />
                <button onclick="sendMessage()" id="send-btn" 
                    class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-full transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus-visible flex items-center justify-center shadow-lg hover:shadow-xl">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bg-white/90 backdrop-blur-sm border-t border-gray-100 p-1.5">
            <div class="flex justify-around">
                <button onclick="showHome()" class="nav-btn flex flex-col items-center space-y-0 p-1 rounded-lg transition-all duration-200 text-primary bg-blue-50 focus-visible">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    <span class="small-text font-medium text-xs">Home</span>
                </button>
                <button onclick="startChat()" class="nav-btn flex flex-col items-center space-y-0 p-1 rounded-lg transition-all duration-200 text-gray-700 hover:text-gray-900 hover:bg-gray-50 focus-visible">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                    </svg>
                    <span class="small-text font-medium text-xs">Chat</span>
                </button>
                <button onclick="showFAQ()" class="nav-btn flex flex-col items-center space-y-0 p-1 rounded-lg transition-all duration-200 text-gray-700 hover:text-gray-900 hover:bg-gray-50 focus-visible">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="small-text font-medium text-xs">FAQ</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentScreen = 'home';
        let isRegistered = false;
        let visitorId = null;
        let messages = [];
        let conversationStep = 'ask_explore';
        let quickReplies = [];
        let isLoading = false;
        let selectedCountryCode = '+91';
        let hasWelcomeMessage = false;
        let showCountryDropdown = false;

        // Country codes data
        const countryCodes = [
            { code: '+91', country: 'India', flag: '🇮🇳' },
            { code: '+1', country: 'United States', flag: '🇺🇸' },
            { code: '+44', country: 'United Kingdom', flag: '🇬🇧' },
            { code: '+86', country: 'China', flag: '🇨🇳' },
            { code: '+81', country: 'Japan', flag: '🇯🇵' },
            { code: '+49', country: 'Germany', flag: '🇩🇪' },
            { code: '+33', country: 'France', flag: '🇫🇷' },
            { code: '+39', country: 'Italy', flag: '🇮🇹' },
            { code: '+34', country: 'Spain', flag: '🇪🇸' },
            { code: '+7', country: 'Russia', flag: '🇷🇺' },
            { code: '+55', country: 'Brazil', flag: '🇧🇷' },
            { code: '+61', country: 'Australia', flag: '🇦🇺' },
            { code: '+82', country: 'South Korea', flag: '🇰🇷' },
            { code: '+65', country: 'Singapore', flag: '🇸🇬' },
            { code: '+971', country: 'UAE', flag: '🇦🇪' }
        ];

        // FAQ Data
        const faqData = [
            {
                id: 1,
                question: 'How do I schedule an environmental assessment?',
                answer: 'You can schedule an environmental assessment by contacting our team at info@envirocarelabs.com or calling +1-555-0123. We offer flexible scheduling including emergency assessments.',
                category: 'Scheduling',
                tags: ['assessment', 'environmental', 'scheduling', 'contact']
            },
            {
                id: 2,
                question: 'What are your laboratory testing services?',
                answer: 'We offer comprehensive testing services including water quality analysis, food safety testing, environmental monitoring, air quality assessment, and soil contamination testing.',
                category: 'Services',
                tags: ['testing', 'laboratory', 'water', 'food', 'environmental', 'air', 'soil']
            },
            {
                id: 3,
                question: 'How can I contact the support team?',
                answer: 'Our support team is available via email at support@envirocarelabs.com, phone at +1-555-0123, or through our live chat system. We respond within 2 hours during business hours.',
                category: 'Support',
                tags: ['contact', 'support', 'email', 'phone', 'chat']
            },
            {
                id: 4,
                question: 'What are your testing turnaround times?',
                answer: 'Standard tests typically take 3-5 business days. Rush services are available for urgent cases with results in 24-48 hours. Custom analysis may take 1-2 weeks.',
                category: 'Timing',
                tags: ['turnaround', 'timing', 'rush', 'urgent', 'custom']
            },
            {
                id: 5,
                question: 'Do you provide emergency response services?',
                answer: 'Yes, we offer 24/7 emergency response for environmental incidents, contamination events, and urgent testing needs. Call our emergency hotline for immediate assistance.',
                category: 'Emergency',
                tags: ['emergency', '24/7', 'urgent', 'incident', 'contamination']
            },
            {
                id: 6,
                question: 'What certifications do your laboratories have?',
                answer: 'Our laboratories are ISO 17025 accredited, NELAP certified, and EPA approved. We maintain strict quality control standards and participate in proficiency testing programs.',
                category: 'Certification',
                tags: ['certification', 'ISO', 'NELAP', 'EPA', 'accreditation', 'quality']
            }
        ];

        // Service options
        const MAIN_SERVICES = [
            'Water Testing',
            'Food Testing',
            'Environmental Testing',
            'Shelf-Life Study',
            'Others'
        ];

        const WATER_TYPES = [
            'Drinking Water Testing',
            'FSSAI Compliance Water Testing',
            'Swimming Pool Water Testing',
            'Others'
        ];

        const ENV_TYPES = [
            'ETP Water Testing',
            'STP Water Testing',
            'Ambient Air',
            'Stack Emission',
            'Workplace Monitoring',
            'IAQ [Indoor Air Quality]',
            'Noise Testing',
            'Illumination',
            'Others'
        ];

        const FOOD_CATEGORIES = [
            'Dairy products and analogues',
            'Fats and oils, and fat emulsions',
            'Edible ices, including sherbet and sorbet',
            'Fruits, vegetables, seaweeds, nuts, and seeds',
            'Confectionery',
            'Cereals, grains, roots, tubers, pulses, and legumes',
            'Bakery products',
            'Meat and meat products including poultry',
            'Fish and fish products, including molluscs, crustaceans, and echinoderms',
            'Eggs and egg products',
            'Sweeteners, including honey',
            'Salts, spices, soups, sauces, salads, and protein products',
            'Foodstuffs for particular nutritional uses',
            'Beverages, excluding dairy products',
            'Ready-to-eat savouries',
            'Substances added to food',
            'Standardised Food Product',
            'Indian Sweets and Snacks',
            'Hemp Seeds and Seed Products',
            'Others'
        ];

        // Initialize chatbot
        function initChatbot() {
            populateCountryList();
            showHome();
            
            // Check for existing visitor
            const storedVisitorId = localStorage.getItem('envirocareVisitorId');
            if (storedVisitorId) {
                visitorId = storedVisitorId;
                isRegistered = true;
                startChat();
            }

            // Setup form submission
            document.getElementById('visitor-form-element').addEventListener('submit', handleVisitorForm);
            
            // Setup message input
            document.getElementById('message-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && conversationStep === 'free_text') {
                    sendMessage();
                }
            });

            // Setup FAQ search
            document.getElementById('faq-search').addEventListener('input', filterFAQs);
        }

        // Navigation functions
        function showHome() {
            currentScreen = 'home';
            hideAllScreens();
            document.getElementById('home-screen').classList.remove('hidden');
            updateNavigation('home');
        }

        function startChat() {
            if (!isRegistered) {
                showVisitorForm();
            } else {
                showChatArea();
            }
        }

        function showVisitorForm() {
            currentScreen = 'form';
            hideAllScreens();
            document.getElementById('visitor-form').classList.remove('hidden');
            updateNavigation('chat');
        }

        function showChatArea() {
            currentScreen = 'chat';
            hideAllScreens();
            document.getElementById('chat-area').classList.remove('hidden');
            document.getElementById('chat-input').classList.remove('hidden');
            updateNavigation('chat');
            
            // Only add welcome message if no messages exist and not already added
            if (messages.length === 0 && !hasWelcomeMessage) {
                addBotMessage("Hello! 👋 Welcome to *Envirocare Labs*! I'm Eva, your Virtual Assistant.");
                setQuickReplies(['Yes', 'No', 'Ask a question']);
                hasWelcomeMessage = true;
            }
        }

        function showFAQ() {
            currentScreen = 'faq';
            hideAllScreens();
            document.getElementById('faq-area').classList.remove('hidden');
            updateNavigation('faq');
            displayFAQs(faqData);
        }

        function hideAllScreens() {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('visitor-form').classList.add('hidden');
            document.getElementById('chat-area').classList.add('hidden');
            document.getElementById('faq-area').classList.add('hidden');
            document.getElementById('chat-input').classList.add('hidden');
        }

        function updateNavigation(activeTab) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-primary', 'bg-blue-50');
                btn.classList.add('text-gray-700', 'hover:text-gray-900', 'hover:bg-gray-50');
            });
            
            if (activeTab === 'home') {
                document.querySelector('.nav-btn').classList.add('text-primary', 'bg-blue-50');
                document.querySelector('.nav-btn').classList.remove('text-gray-700', 'hover:text-gray-900', 'hover:bg-gray-50');
            } else if (activeTab === 'chat') {
                document.querySelectorAll('.nav-btn')[1].classList.add('text-primary', 'bg-blue-50');
                document.querySelectorAll('.nav-btn')[1].classList.remove('text-gray-700', 'hover:text-gray-900', 'hover:bg-gray-50');
            } else if (activeTab === 'faq') {
                document.querySelectorAll('.nav-btn')[2].classList.add('text-primary', 'bg-blue-50');
                document.querySelectorAll('.nav-btn')[2].classList.remove('text-gray-700', 'hover:text-gray-900', 'hover:bg-gray-50');
            }
        }

        // Country dropdown functions
        function populateCountryList() {
            const countryList = document.getElementById('country-list');
            countryList.innerHTML = '';
            
            countryCodes.forEach(country => {
                const button = document.createElement('button');
                button.type = 'button';
                button.className = `w-full flex items-center px-3 py-2 text-sm hover:bg-gray-50 rounded transition-colors ${
                    selectedCountryCode === country.code ? 'bg-blue-50 text-blue-600' : 'text-gray-700'
                }`;
                button.innerHTML = `
                    <span class="mr-3 text-base">${country.flag}</span>
                    <span class="font-medium mr-3 w-12 text-left">${country.code}</span>
                    <span class="text-gray-600 truncate">${country.country}</span>
                `;
                button.onclick = () => selectCountry(country);
                countryList.appendChild(button);
            });
        }

        function toggleCountryDropdown() {
            showCountryDropdown = !showCountryDropdown;
            const dropdown = document.getElementById('country-dropdown');
            dropdown.classList.toggle('hidden', !showCountryDropdown);
        }

        function selectCountry(country) {
            selectedCountryCode = country.code;
            document.getElementById('selected-flag').textContent = country.flag;
            document.getElementById('selected-code').textContent = country.code;
            showCountryDropdown = false;
            document.getElementById('country-dropdown').classList.add('hidden');
        }

        // Visitor form handling
        function handleVisitorForm(e) {
            e.preventDefault();
            
            const name = document.getElementById('visitor-name').value;
            const email = document.getElementById('visitor-email').value;
            const phone = document.getElementById('visitor-phone').value;
            
            if (!name || !email) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Simulate visitor registration
            visitorId = 'visitor_' + Date.now();
            isRegistered = true;
            localStorage.setItem('envirocareVisitorId', visitorId);
            localStorage.setItem('envirocareVisitorName', name);
            localStorage.setItem('envirocareVisitorEmail', email);
            localStorage.setItem('envirocareVisitorPhone', phone);
            
            showChatArea();
            
            // Welcome message will be handled by showChatArea() function
        }

        // Chat functions
        function addMessage(message, isVisitor) {
            const messageId = 'msg_' + Date.now();
            const messageObj = {
                id: messageId,
                message: message,
                is_visitor: isVisitor,
                timestamp: new Date().toISOString()
            };
            
            messages.push(messageObj);
            displayMessages();
        }

        function addBotMessage(message) {
            addMessage(message, false);
        }

        function addUserMessage(message) {
            addMessage(message, true);
        }

        function displayMessages() {
            const container = document.getElementById('messages-container');
            container.innerHTML = '';
            
            // Remove duplicate messages based on content and timestamp
            const uniqueMessages = [];
            const seenMessages = new Set();
            
            messages.forEach(msg => {
                const messageKey = `${msg.message}_${msg.is_visitor}`;
                if (!seenMessages.has(messageKey)) {
                    seenMessages.add(messageKey);
                    uniqueMessages.push(msg);
                }
            });
            
            // Update messages array with unique messages
            messages = uniqueMessages;
            
            messages.forEach((msg, index) => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex ${msg.is_visitor ? 'justify-end' : 'justify-start'}`;
                
                // Show avatar only on first bot message of a block
                const showAvatar = !msg.is_visitor && (index === 0 || messages[index - 1].is_visitor);
                
                messageDiv.innerHTML = `
                    <div class="message-bubble ${msg.is_visitor ? 'user' : 'bot'}">
                        ${showAvatar ? '<img src="./images/eva-avatar.png" alt="Eva" class="avatar">' : ''}
                        <div class="${showAvatar ? 'ml-2' : ''}">
                            <p class="body-text whitespace-pre-line leading-relaxed">${msg.message}</p>
                            <p class="small-text mt-2 text-gray-500">
                                ${new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                            </p>
                        </div>
                    </div>
                `;
                
                container.appendChild(messageDiv);
            });
            
            // Scroll to bottom smoothly
            container.scrollTop = container.scrollHeight;
        }
        
        function showTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            indicator.classList.remove('hidden');
        }
        
        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            indicator.classList.add('hidden');
        }

        function setQuickReplies(replies) {
            quickReplies = replies;
            const container = document.getElementById('quick-replies');
            const grid = document.getElementById('quick-replies-grid');
            
            if (replies.length === 0) {
                container.classList.add('hidden');
                return;
            }
            
            container.classList.remove('hidden');
            grid.innerHTML = '';
            
            replies.forEach((reply, index) => {
                const button = document.createElement('button');
                button.className = `quick-reply-chip focus-visible`;
                button.textContent = reply;
                button.onclick = () => handleQuickReply(reply);
                grid.appendChild(button);
            });
        }

        function handleQuickReply(choice) {
            if (isLoading) return;
            
            addUserMessage(choice);
            setQuickReplies([]);
            
            // Simulate bot response
            setTimeout(() => {
                let botResponse = '';
                
                switch (conversationStep) {
                    case 'ask_explore':
                        if (choice.toLowerCase() === 'yes') {
                            botResponse = 'Envirocare Labs offers a wide range of services! Which one are you interested in?';
                            conversationStep = 'select_main_service';
                            setQuickReplies([...MAIN_SERVICES, 'Back']);
                        } else if (choice === 'Ask a question') {
                            botResponse = 'Go ahead and ask me anything! 😊';
                            conversationStep = 'free_text';
                        } else {
                            botResponse = 'No problem! Is there something specific I can help you with?';
                            conversationStep = 'free_text';
                        }
                        break;
                        
                    case 'select_main_service':
                        if (choice === 'Water Testing') {
                            botResponse = 'Awesome! 💧 Water Testing is one of our specialties. What type of water testing are you interested in?';
                            conversationStep = 'select_water_type';
                            setQuickReplies([...WATER_TYPES, 'Back']);
                        } else if (choice === 'Environmental Testing') {
                            botResponse = 'Great choice! 🌱 Environmental Testing is key to sustainability. What specific environmental service do you need?';
                            conversationStep = 'select_environmental_type';
                            setQuickReplies([...ENV_TYPES, 'Back']);
                        } else if (choice === 'Food Testing') {
                            botResponse = 'Perfect! 🥫 Food Testing ensures safety and quality. Please select a food category:';
                            conversationStep = 'select_food_category';
                            setQuickReplies([...FOOD_CATEGORIES.slice(0, 6), 'Next', 'Back']);
                        } else {
                            botResponse = 'Could you specify what kind of service you\'re looking for? I\'m here to help! 🤔';
                            conversationStep = 'free_text';
                        }
                        break;
                        
                    case 'select_water_type':
                    case 'select_environmental_type':
                    case 'select_food_category':
                        botResponse = `Got it! You selected ${choice}. Would you like to share more details about your needs?`;
                        conversationStep = 'ask_elaborate';
                        setQuickReplies(['Yes', 'No', 'Back']);
                        break;
                        
                    case 'ask_elaborate':
                        if (choice.toLowerCase() === 'yes') {
                            botResponse = 'Great! Please share more details, and I\'ll assist you further. 😊';
                            conversationStep = 'collect_details';
                        } else {
                            botResponse = 'Perfect! I\'ve created an enquiry for you. Our team will reach out soon to assist you. Have a great day! 😇';
                            conversationStep = 'end_confirm';
                            setQuickReplies(['Continue chat', 'End chat']);
                        }
                        break;
                        
                    case 'collect_details':
                        botResponse = 'Thank you for sharing those details! I\'ve noted everything down. Our Envirocare team will connect with you soon to discuss your requirements further. You can expect to hear from us within 24 hours. 😊';
                        conversationStep = 'end_confirm';
                        setQuickReplies(['Continue chat', 'End chat']);
                        break;
                        
                    case 'end_confirm':
                        if (choice === 'Continue chat') {
                            botResponse = 'Great! Would you like to explore our services or have a specific question?';
                            conversationStep = 'ask_explore';
                            setQuickReplies(['Yes', 'Ask a question', 'No']);
                        } else {
                            botResponse = 'Thanks for chatting with Envirocare Labs! Feel free to reach out anytime. 😊';
                            conversationStep = 'free_text';
                            setQuickReplies([]);
                        }
                        break;
                        
                    default:
                        botResponse = 'I\'d be happy to help you with our services, contact information, or any other questions you might have! 😊';
                        setQuickReplies(['Explore services', 'Ask another question']);
                        conversationStep = 'ask_explore';
                }
                
                addBotMessage(botResponse);
            }, 1000);
        }

        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message || isLoading) return;
            
            addUserMessage(message);
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate bot response
            setTimeout(() => {
                hideTypingIndicator();
                let botResponse = '';
                const lowerMessage = message.toLowerCase();
                
                // Handle specific conversation steps
                if (conversationStep === 'collect_details') {
                    botResponse = 'Thank you for sharing those details! I\'ve noted everything down. Our Envirocare team will connect with you soon to discuss your requirements further. You can expect to hear from us within 24 hours. 😊';
                    conversationStep = 'end_confirm';
                    setQuickReplies(['Continue chat', 'End chat']);
                } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                    botResponse = `Hi there! I'm Eva from Envirocare Labs. What's on your mind today? 😊`;
                } else if (lowerMessage.includes('help') || lowerMessage.includes('assist')) {
                    botResponse = `I'm here to help with:\n• Exploring our services (Water, Food, Environmental Testing, etc.)\n• Answering questions about our lab\n• Scheduling assessments\n• Contact info\nWhat would you like to dive into?`;
                } else if (lowerMessage.includes('contact') || lowerMessage.includes('email') || lowerMessage.includes('phone')) {
                    botResponse = `You can reach us at:\n📧 info@envirocarelabs.com\n📞 +1-555-0123\nWe're open Monday-Friday, 9AM-6PM EST. Want to explore our services too?`;
                    setQuickReplies(['Yes', 'No', 'Ask another question']);
                    conversationStep = 'ask_explore';
                } else if (lowerMessage.includes('hours') || lowerMessage.includes('time') || lowerMessage.includes('open')) {
                    botResponse = `Our hours are:\n🕘 Monday-Friday: 9AM-6PM EST\n🕘 Saturday: 10AM-4PM EST\n🕘 Sunday: Closed\nWe also offer 24/7 emergency support for urgent environmental issues. Anything else I can assist with?`;
                    setQuickReplies(['Continue chat', 'End chat']);
                    conversationStep = 'end_confirm';
                } else if (lowerMessage.includes('price') || lowerMessage.includes('cost') || lowerMessage.includes('pricing')) {
                    botResponse = `Pricing depends on your needs:\n• Basic Assessment: $299\n• Comprehensive Analysis: $599\n• Custom Solutions: Contact us for a quote\nWould you like to discuss a specific service?`;
                    setQuickReplies(['Yes', 'No', 'Ask another question']);
                    conversationStep = 'ask_explore';
                } else {
                    botResponse = `I'd be happy to help you with our services, contact information, or any other questions you might have! 😊`;
                    setQuickReplies(['Explore services', 'Ask another question']);
                    conversationStep = 'ask_explore';
                }
                
                addBotMessage(botResponse);
            }, 1000);
        }

        function resetChat() {
            localStorage.removeItem('envirocareVisitorId');
            localStorage.removeItem('envirocareVisitorName');
            localStorage.removeItem('envirocareVisitorEmail');
            localStorage.removeItem('envirocareVisitorPhone');
            
            visitorId = null;
            isRegistered = false;
            messages = [];
            conversationStep = 'ask_explore';
            hasWelcomeMessage = false;
            setQuickReplies([]);
            
            showHome();
        }

        // FAQ functions
        function filterFAQs() {
            const query = document.getElementById('faq-search').value.toLowerCase();
            const filtered = faqData.filter(faq => 
                faq.question.toLowerCase().includes(query) ||
                faq.answer.toLowerCase().includes(query) ||
                faq.category.toLowerCase().includes(query) ||
                faq.tags.some(tag => tag.toLowerCase().includes(query))
            );
            displayFAQs(filtered);
        }

        function displayFAQs(faqs) {
            const container = document.getElementById('faq-results');
            container.innerHTML = '';
            
            if (faqs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="emoji">🔍</div>
                        <p class="body-text">No FAQs found</p>
                        <p class="small-text mt-1">Try different keywords or browse all FAQs</p>
                    </div>
                `;
                return;
            }
            
            faqs.forEach(faq => {
                const faqDiv = document.createElement('div');
                faqDiv.className = 'faq-card bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm';
                faqDiv.innerHTML = `
                    <div class="p-4 cursor-pointer group" onclick="toggleFAQ(${faq.id})">
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <h4 class="subheading text-gray-800 group-hover:text-primary transition-colors duration-200">
                                    ${faq.question}
                                </h4>
                                <div class="flex items-center space-x-2 mt-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full small-text font-medium bg-blue-100 text-primary">
                                        ${faq.category}
                                    </span>
                                    <span class="small-text text-gray-600">${faq.tags.slice(0, 2).join(', ')}</span>
                                </div>
                            </div>
                            <svg class="w-4 h-4 text-gray-400 group-hover:text-primary transition-colors duration-200 transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                            </svg>
                        </div>
                    </div>
                    <div id="faq-answer-${faq.id}" class="hidden px-4 pb-4">
                        <div class="pt-3 border-t border-gray-100">
                            <p class="body-text text-gray-700 leading-relaxed">${faq.answer}</p>
                            <div class="flex flex-wrap gap-1 mt-3">
                                ${faq.tags.map(tag => `<span class="inline-flex items-center px-2 py-1 rounded-md small-text font-medium bg-gray-100 text-gray-700">#${tag}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(faqDiv);
            });
        }

        function toggleFAQ(faqId) {
            const element = document.getElementById(`faq-answer-${faqId}`);
            if (element) {
                element.classList.toggle('hidden');
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initChatbot);
    </script>
</body>
</html>
